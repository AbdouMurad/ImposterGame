<!DOCTYPE html>
<html>
<body>
    <input id="roomid" placeholder="id" />
    <input id="name" placeholder="name" />
    <button onclick="send()">Send</button>
    <button onclick="createRoom()">Create Room</button>
    <button onclick="getSourceCode()">Source Code</button>
    <button onclick="startGame()">Start Game</button>
    <button onclick="sendtests()">Tests</button>

    <script>
        const socket = new WebSocket("ws://localhost:8765");

        socket.onopen = () => {
        };
        
        socket.onmessage = (event) => {
            console.log("Server:", event.data);
        };
        function getSourceCode() {
            const value = document.getElementById("roomid").value;
            const name = document.getElementById("name").value;

            socket.send(JSON.stringify({
                type: "request-code",
                name: name,
                playerid: value,
                roomid: value
            }));
        }
        function startGame() {
            const value = document.getElementById("roomid").value;
            const name = document.getElementById("name").value;

            socket.send(JSON.stringify({
                type: "start-game",
                name: name,
                playerid: value,
                roomid: value
            }));
        }
        function createRoom() {
            const name = document.getElementById("name").value;

            socket.send(JSON.stringify({
                type: "create-room",
                name: name,
                playerid: 123,
            }));
        }
        function send() {
            const value = document.getElementById("roomid").value;
            const name = document.getElementById("name").value;
    
            socket.send(JSON.stringify({
                type: "join-room",
                name: name,
                playerid: value,
                roomid: value
            }));
        }

        function sendtests() {
            const value = document.getElementById("roomid").value;
            const name = document.getElementById("name").value;
    
            socket.send(JSON.stringify({
                type: "request-tests",
                playerid: value,
                roomid: value
            }));
        }
    </script>
</body>
</html>